/* ============================================================
   ESTILOS ÚNICOS: Producto Mixto (Álgebra)
   Prefijo: .pm-
   ============================================================ */

/* --- Contenedor Principal --- */
.pm-main-container {
    max-width: var(--max-width, 1200px); margin: 2rem auto; padding: 0 1rem;
    display: flex; flex-direction: column; gap: 2rem;
}

/* --- Tarjetas & Paneles Base --- */
.pm-card, .pm-controls-panel {
    background: var(--card-bg); border-radius: var(--border-radius);
    padding: 1.5rem; box-shadow: var(--shadow); border: var(--card-border);
    text-align: left;
}

/* --- Tipografía y Colores (Tema Álgebra) --- */
.pm-title, .pm-section-title { color: var(--color-algebra, #f1c40f); margin: 0; }
.pm-title { font-size: 1.8rem; font-weight: 700; }
.pm-subtitle { font-size: 1.1rem; color: var(--color-algebra-dark, #d4ac0d); margin-top: 0.5rem; }

.pm-section-title {
    border-bottom: 1px solid var(--table-border-color); padding-bottom: 0.5rem; margin-bottom: 1rem;
}
.pm-divider {
    border: 0; height: 1px; background: var(--table-border-color); margin: 1.5rem 0;
}

/* --- SIMULADOR (Layout) --- */
.pm-simulador-layout {
    display: grid; grid-template-columns: 1fr 2fr; /* Controles | Canvas */
    gap: 20px; margin-top: 1.5rem; align-items: start;
}
@media (max-width: 768px) {
    .pm-simulador-layout { grid-template-columns: 1fr; }
}

/* --- Controles del Simulador --- */
.pm-controls-panel {
    padding: 1rem; background-color: var(--formula-bg);
    display: flex; flex-direction: column; gap: 1rem;
}

.pm-input-group { display: flex; align-items: center; gap: 5px; }
.pm-input-group input {
    width: 100%; padding: 8px; border: 1px solid var(--table-border-color);
    border-radius: 4px; background-color: var(--card-bg); color: var(--text-color);
}

/* Etiquetas de Vectores (Colores Locales) */
.pm-vector-label { font-weight: bold; font-family: monospace; font-size: 1.1em; width: 30px; }
.pm-label-a { color: #ff0000; } 
.pm-label-b { color: #00cc00; } 
.pm-label-c { color: #0000ff; } 

.pm-btn-action {
    background: var(--color-algebra); color: #000; border: none;
    padding: 10px; border-radius: 4px; font-weight: bold; cursor: pointer;
    transition: filter 0.2s; margin-top: 10px;
}
.pm-btn-action:hover { filter: brightness(0.9); }

.pm-result-box {
    text-align: center; font-size: 1.2rem; font-weight: bold; padding: 10px;
    background-color: var(--card-bg); border: 2px solid var(--color-algebra);
    border-radius: 4px; color: var(--text-color);
}
.pm-instruction { text-align: center; color: var(--text-muted); margin: 0; }

/* --- CANVAS 3D --- */
.pm-canvas-wrapper {
    width: 100%; height: 400px; min-height: 400px;
    background-color: var(--bg-color); border-radius: 8px; overflow: hidden;
    border: 1px solid var(--table-border-color); position: relative;
}
.pm-canvas-wrapper canvas { width: 100% !important; height: 100% !important; display: block; }

/* --- FÓRMULAS Y PASOS --- */
.pm-formula-box {
    text-align: center; font-size: 1.3rem; padding: 1rem; margin: 1rem 0;
    background: var(--formula-bg); border-radius: 8px;
}

/* Pasos alineados a la izquierda */
.producto-mixto-step { 
    margin-bottom: 15px; padding: 10px; border-left: 3px solid var(--color-algebra);
    background-color: var(--formula-bg); border-radius: 0 4px 4px 0; text-align: left;
}
.producto-mixto-step-title { font-weight: bold; color: var(--color-algebra-dark); margin-bottom: 5px; }
.producto-mixto-math { font-family: monospace; color: var(--text-color); }

/* --- TEORÍA (Propiedades) --- */
.pm-props-grid {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem; margin-top: 1rem;
}
.pm-prop-item {
    background-color: var(--card-hover); padding: 1rem;
    border-radius: 8px; border-top: 3px solid var(--color-algebra);
}
.pm-prop-item h4 { margin-top: 0; color: var(--text-color); font-size: 1rem; }

.pm-mini-formula {
    font-family: monospace; background-color: var(--bg-color); padding: 5px;
    text-align: center; border-radius: 4px; margin: 5px 0; color: var(--text-color);
}
.pm-list { padding-left: 20px; }
.pm-list li { margin-bottom: 0.5rem; }

/* --- Derivaciones Matemáticas Compactas --- */
.derivacion-container {
    background-color: var(--bg-color); border: 1px dashed var(--table-border-color);
    border-radius: 6px; padding: 10px; margin: 10px 0; font-size: 0.9rem;
}
.derivacion-container p { margin: 5px 0 2px 0; color: var(--text-muted); font-size: 0.85rem; font-weight: bold; }
.derivacion-container .math-step { text-align: center; margin: 2px 0; }

.formula-highlight {
    background-color: var(--formula-bg); border-left: 4px solid var(--color-algebra);
    border-radius: 4px; padding: 10px; margin-top: 15px; box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}